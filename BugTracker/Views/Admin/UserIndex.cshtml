@using BugTracker.ViewModels
@using BugTracker.Helpers

@model IEnumerable<UserIndexViewModel>
@{

    var roleHelper = new UserRolesHelper();
    var projectHelper = new ProjectsHelper();
}




<div class="page-title">

    <h3>All <span class="semi-bold">Users</span></h3>
</div>
<div class="row-fluid">
    <div class="span12">
        <div class="grid simple ">
            <div class="grid-title">
                <h4>View <span class="semi-bold">Users</span></h4>
                <div class="tools">
                    <a href="javascript:;" class="collapse"></a>
                    @*<a href="#grid-config" data-toggle="modal" class="config"></a>*@
                    <a href="javascript:;" class="reload"></a>
                    <a href="javascript:;" class="remove"></a>
                </div>
            </div>
            <div class="grid-body ">
                <table class="table table-hover table-condensed" id="example">
                    <thead>
                        <tr>
                            <th style="width:10%">
                                Avatar
                            </th>
                            <th style="width:10%">User</th>
                            @*<th style="width: 10%">Current Role</th>*@
                            <th style="width:22%" data-hide="phone,tablet">Role/Manage</th>
                            <th style="width:6%">Projects/Manage</th>
                            <th style="width:6%">Manage User</th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var user in Model)
                        {

                            var role = user.ActiveRole;
                            if (role == null)
                            {
                                role = "NONE";
                            }







                            <tr>
                                
                                <td class="v-align-middle"><img src="@user.AvatarURL" class="img-responsive" width="30"></td>
                                <td class="v-align-middle"><span class="muted">@user.FullNameWithEmail</span></td>
                                @*<td class="v-align-middle"><span class="muted">@role</span></td>*@
                                <td><span class="muted">@Html.DropDownList("CurrentRole", user.CurrentRole, "NONE")</span></td>
                                <td><span class="muted">@Html.ListBox("CurrentProjects", user.CurrentProjects)</span></td>
                                <td class="v-align-middle">
                                    @Html.ActionLink("Edit", "EditProfile", "Members", new { userId = user.Id }, null) |
                                    <input type="submit" value="Assign" class="btn btn-default" />
                                </td>
                            </tr>
                        }



                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
